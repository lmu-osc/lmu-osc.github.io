```{r}
#| echo: false
#| message: false
#| warning: false

# prepare date display, include end date when present and strip first year if years match
# event_date and event_end_date should be in the format YYYY-MM-DD
event_date_formatted <- lubridate::parse_date_time(event_date, orders = c("ymd", "dmy", "mdy"))

if (has_end_date) {
  event_end_date_formatted <- lubridate::parse_date_time(event_end_date, orders = c("ymd", "dmy", "mdy"))
  if (lubridate::year(event_date_formatted) == lubridate::year(event_end_date_formatted)) {
    date_display <- paste0(
      format(event_date_formatted, "%d %b"),
      " - ",
      format(event_end_date_formatted, "%d %b %Y")
    )
  } else {
    date_display <- paste0(
      format(event_date_formatted, "%d %b %Y"),
      " - ",
      format(event_end_date_formatted, "%d %b %Y")
    )
  }
} else {
  date_display <- format(event_date_formatted, "%d %b %Y")
}





tags$div(
  class = "d-flex flex-nowrap justify-content-center overflow-auto gap-3 py-2 px-1",

  tags$div(
    class = "card flex-shrink-0 border border-primary border-2",
    style = "width:14rem;",
    tags$div(
      class = "card-body",
      tags$h5(class = "card-title", HTML('<i class="bi bi-calendar-event"></i> Date &amp; Time')),
      tags$p(class = "card-text",
             date_display,
             tags$br(),
             event_time
      )
    )
  ),

  tags$div(
    class = "card flex-shrink-0 border border-primary border-2",
    style = "width:14rem;",
    tags$div(
      class = "card-body",
      tags$h5(class = "card-title", HTML('<i class="bi bi-geo-alt"></i> Location')),
      tags$div(
        class = "location-text",
        tags$a(
          href = event_map_url,
          target = "_blank",
          style = "text-decoration:none;color:inherit;",
          tags$div(class = "meta-value",
                  event_location_name,
                   tags$br(),
                   (event_location_address)
          )
        )
      )
    )
  ),

  tags$div(
    class = "card flex-shrink-0 border border-primary border-2",
    style = "width:14rem;",
    tags$div(
      class = "card-body",
      tags$h5(class = "card-title", HTML('<i class="bi bi-laptop"></i> Format')),
      tags$p(class = "card-text",
             event_format_type,
             tags$br(),
            event_format_detail
      )
    )
  ),

  tags$div(
    class = "card flex-shrink-0 border border-primary border-2",
    style = "width:14rem;",
    tags$div(
      class = "card-body",
      tags$h5(class = "card-title", HTML('<i class="bi bi-translate"></i> Language')),
      tags$p(class = "card-text",
             event_language_primary,
             tags$br(),
             event_language_detail
      )
    )
  )
)
```

