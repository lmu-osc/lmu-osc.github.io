<%
const slides = (Array.isArray(items) && items.length) ? items.slice(0, 3) : [];
%>

<div class="carousel-styled-wrapper">
<div id="newsCarousel" class="carousel slide carousel-dark carousel-fade" data-bs-ride="carousel">

<div class="carousel-indicators mt-5">
<% slides.forEach((item, index) => { %>
<button type="button" data-bs-target="#newsCarousel" data-bs-slide-to="<%= index %>" class="<%= index === 0 ? 'active' : '' %>" aria-current="<%= index === 0 ? 'true' : 'false' %>" aria-label="Slide <%= index + 1 %>"></button>
<% }); %>
</div>

<h2 class="text-center">Latest News</h2>

<div class="carousel-inner">
<% slides.forEach((item, index) => { %>
<div class="carousel-item <%= index === 0 ? 'active' : '' %>">
<div class="card border-0 shadow-sm">
<% const imgSrc = item.image || '/assets/img/osc_image_assets/LMU_Open_Science_Center_Logo.jpg'; %>
<% const isDefaultImage = !item.image; %>
<% let imgStyle = "aspect-ratio: 16/12; object-fit: " + (isDefaultImage ? 'contain' : 'cover') + "; object-position: center;"; %>
<% if (isDefaultImage) { imgStyle += " background-color: #fff;"; } %>
<img src="<%= imgSrc %>" class="card-img-top d-block w-100" alt="<%= item.title || '' %>" style="<%= imgStyle %>">
<div class="card-body text-center">
<% if (item.title) { %>
<div class="card-title-custom" style="display: -webkit-box; -webkit-line-clamp: 2; line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; min-height: 2.5em; line-height: 1.25;"><%= item.title %></div>
<% } %>
<p class="card-text" style="display: -webkit-box; -webkit-line-clamp: 3; line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; min-height: 4.5em; line-height: 1.5em;"><%= item.description %></p>
<% if (item.path) { %>
<a href="<%= item.path %>" class="btn btn-primary mt-auto mb-4" role="button">Read More!</a>
<% } %>
</div>
</div>
</div>
<% }); %>
<div class="carousel-indicators mt-3">
<% slides.forEach((item, index) => { %>
<button type="button" data-bs-target="#newsCarousel" data-bs-slide-to="<%= index %>" class="<%= index === 0 ? 'active' : '' %>" aria-current="<%= index === 0 ? 'true' : 'false' %>" aria-label="Slide <%= index + 1 %>"></button>
<% }); %>
</div>
</div>


<button class="carousel-control-prev" type="button" data-bs-target="#newsCarousel" data-bs-slide="prev">
<span class="carousel-control-prev-icon" aria-hidden="true"></span>
<span class="visually-hidden">Previous</span>
</button>
<button class="carousel-control-next" type="button" data-bs-target="#newsCarousel" data-bs-slide="next">
<span class="carousel-control-next-icon" aria-hidden="true"></span>
<span class="visually-hidden">Next</span>
</button>

</div>

<div class="text-center mt-3">
<a href="/news" class="btn btn-outline-primary btn-lg" role="button">View All News</a>
</div>

</div>

<style>

/* Card title styling */
      .card-title-custom {
        font-weight: 700;
        font-size: 1.6rem;
      }

      /* Card body styling */
      .carousel-styled-wrapper .card-body {
        background-color: #f5f5f5;
        border-radius: 0 0 0.25rem 0.25rem;
      }

</style>