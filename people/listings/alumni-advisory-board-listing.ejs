<%
// Match alumni advisory board memberships only.
const isAlumniAdvisoryBoard = (membership) =>
  membership &&
  typeof membership === 'object' &&
  membership.type === 'advisory board' &&
  membership.status === 'alumni';

// Keep people who have at least one matching alumni advisory board membership.
const alumnaeItems = (items || []).filter((item) => {
  const memberships = Array.isArray(item.memberships) ? item.memberships : [];
  return memberships.some(isAlumniAdvisoryBoard);
});
%>

<ul>
<% for (const item of alumnaeItems) { %>
<%
const memberships = Array.isArray(item.memberships) ? item.memberships : [];
// Keep alumni advisory board memberships, even if the title is missing.
const alumniAdvisoryMemberships = memberships.filter(isAlumniAdvisoryBoard);
const personLabel = [item.academic_title, item.name].filter(Boolean).join(' ');
%>

<% if (alumniAdvisoryMemberships.length === 0) { %>
<li>
<a href="<%= item.path %>"><%= personLabel %></a>
</li>
<% } else { %>
<% for (const alumniAdvisoryMembership of alumniAdvisoryMemberships) { %>
<%
const alumniTitle =
typeof alumniAdvisoryMembership.title === 'string' &&
alumniAdvisoryMembership.title.trim() !== ''
? alumniAdvisoryMembership.title
: '';
%>
<li>
<a href="<%= item.path %>"><%= personLabel %><%= alumniTitle ? ': ' + alumniTitle : '' %></a>
</li>
<% } %>
<% } %>
<% } %>
</ul>
