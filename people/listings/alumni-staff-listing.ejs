<%
// Match alumni staff memberships only.
const isAlumniStaff = (membership) =>
  membership &&
  typeof membership === 'object' &&
  membership.type === 'staff' &&
  membership.status === 'alumni';

// Keep people who have at least one alumni staff membership.
const alumnaeItems = (items || []).filter((item) => {
  const memberships = Array.isArray(item.memberships) ? item.memberships : [];
  return memberships.some(isAlumniStaff);
});
%>

<ul>
<% for (const item of alumnaeItems) { %>
<%
const memberships = Array.isArray(item.memberships) ? item.memberships : [];
// Keep alumni staff memberships, even if the position is missing.
const alumniStaffMemberships = memberships.filter(isAlumniStaff);
%>

<% if (alumniStaffMemberships.length === 0) { %>
<li>
<a href="<%= item.path %>"><%= item.name %></a>
</li>
<% } else { %>
<% for (const alumniStaffMembership of alumniStaffMemberships) { %>
<%
const start = alumniStaffMembership.start || '';
const end = alumniStaffMembership.end || '';
let dateRange = '';
if (start) {
  dateRange = end ? ' (' + start + ' - ' + end + ')' : ' (' + start + ')';
}
const position = (typeof alumniStaffMembership.position === 'string' && alumniStaffMembership.position.trim() !== '') 
  ? alumniStaffMembership.position 
  : '';
%>
<li>
<a href="<%= item.path %>"><%= item.name %><%= dateRange %><%= position ? ': ' + position : '' %></a>
</li>
<% } %>
<% } %>
<% } %>
</ul>
